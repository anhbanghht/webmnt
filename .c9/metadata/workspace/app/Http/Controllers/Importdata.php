{"filter":false,"title":"Importdata.php","tooltip":"/app/Http/Controllers/Importdata.php","undoManager":{"mark":42,"position":42,"stack":[[{"start":{"row":0,"column":0},"end":{"row":357,"column":0},"action":"insert","lines":["<?php namespace App\\Http\\Controllers;","","use DB;","use stdClass;","use App\\Http\\Requests;","use App\\Http\\Controllers\\Controller;","use PHPExcel_IOFactory;","use PHPExcel_Cell;","use Illuminate\\Http\\Request;","use Input;"," ","use App\\Http\\Requests\\SendfilesRequest;","use App\\Divisions;","use App\\Subject;","","class SendController extends Controller {","","\t/**","\t * Display a listing of the resource.","\t *","\t * @return Response","\t */","    public function index()","    {\t$program= DB::table('programs')->get();","        return view('managerfile.sendfile', ['program'=>$program]);","    }","   ","    ","\tpublic function savework(Request $data)","\t{ ","\t\t$message=\"\";","\t\tif (Input::file('file')->isValid()) { // kiểm tra tồn tại file","\t\t\t$destinationPath = 'uploads/divisions/'; // upload path","\t\t\t$extension = Input::file('file')->getClientOriginalExtension(); // getting image extension","\t\t\t$fileName = 'work1 '.date('d m Y').' '.rand(111,999).'.'.$extension; // renameing image","\t\t\tInput::file('file')->move($destinationPath, $fileName);","\t\t\t$pathfile = 'uploads/divisions/'.$fileName;","\t\t\tif(file_exists($pathfile)){","\t\t\t\t$typeid=$data->type_work; ","\t\t\t\t$check_import = $this->ImportData($pathfile,$typeid);","\t\t\t\tif($check_import && $check_import!=''){","\t\t\t\t\t$message= $check_import;","\t\t\t\t}","\t\t\t}else{","\t\t\t\t$message=\"Error! lỗi trong quá trình upload file.\";","\t\t\t}","\t\t}else{","\t\t\t$message=\"Error! file không tồn tại.\";","\t\t} ","\t\techo $message;","\t//\treturn view('managerfile.sendfile',[ 'message'=>$message]);","\t}","\t ","\tpublic static function ImportData($file,$typeid){","\t\t","\t\t$inputFileType = PHPExcel_IOFactory::identify($file);","\t\t$objReader = PHPExcel_IOFactory::createReader($inputFileType);","\t\t$objReader->setReadDataOnly(true);","\t\t$objReader->setLoadAllSheets();","\t\t$objPHPExcel = $objReader->load($file);","\t\t","\t\t$total_sheets = $objPHPExcel->getSheetCount();","\t\t$sheet = $objPHPExcel->getSheet(0);","\t\t$highestRow = $sheet->getHighestRow(); ","\t\t$highestColumn = $sheet->getHighestColumn();","\t\t$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);","\t\t$dategroup=''; $count_data=0;","\t\t","\t\tfor($row = 2; $row <= $highestRow; ++$row){","\t\t\t$ar=''; ","\t\t\tfor($col = 0; $col <= $highestColumnIndex; ++$col){","\t\t\t\t$ar[]=$sheet->getCellByColumnAndRow($col, $row)->getValue();","\t\t\t}","\t\t\t","\t\t\tif($typeid==11)","\t\t\t{","\t\t\t\t $subject_name=explode('(',$ar[1]);","\t\t\t\t $subject = DB::table('subject')->where('subject_name',trim($subject_name[0]))->first();","\t\t\t\t","\t\t\t\t","\t\t\t\t$name_department=$ar[5];","\t\t\t\t$department = DB::table('departments')->where('department_name',trim($name_department))->first();","\t\t\t\tif($department->id!=''):","\t\t\t\t\t$divisions =new Divisions();","\t\t\t\t\t$divisions->id_subject = $subject->id;","\t\t\t\t\t$divisions->id_department = $department->id;","\t        \t\t$divisions->course_name = $ar[1];","\t        \t\t$divisions->number = $ar[2];","\t        \t\t$divisions->number_practice = $ar[3];","\t        \t\t$divisions->type_learn = $ar[4];","\t        \t\t$divisions->semester = $ar[6];","\t        \t\t$divisions->type_exam = $ar[7];","\t        \t\t$divisions->name_class = $ar[8];","\t        \t\t$divisions->num_student = $ar[9];","\t        \t\t$divisions->giolt = $ar[10];","\t        \t\t$divisions->giotl = $ar[11];","\t        \t\t$divisions->gioth = $ar[12];","\t        \t\t$divisions->thigk = $ar[13];","\t        \t\t$divisions->tonggio = $ar[14];","\t        \t\t$divisions->id_teacher = 0;","\t        \t\t$divisions->note = '';","\t        \t\t$divisions->save();","        \t\tendif;","\t\t\t}","\t\t}","\t\t","\t\tfor($row = 7; $row <= $highestRow; ++$row){","\t\t\t$ar=''; ","\t\t\tfor($col = 0; $col <= $highestColumnIndex; ++$col){","\t\t\t\t$ar[]=$sheet->getCellByColumnAndRow($col, $row)->getValue();","\t\t\t}","\t\t\tif($typeid==1)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs = 1;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==2)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=2;","\t\t        \t\t","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==3)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=3;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==4)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=4;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==5)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=5;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==6)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[11];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=6;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==7)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[12];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=7;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==8)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[10];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=8;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==9)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[10];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=9;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==10)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[13];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=10;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t}","\t","\t}","\t","\t","\t","\tpublic function listfile()","\t{","\t\t$items = DB::table('sendfiles')->where('state', '=', 1)->get();","\t\t$type_works = DB::table('work_types')->where('state', '=', 1)->get();","\t\treturn View('managerfile.listfile', ['items' => $items,'types'=>$type_works]);","\t}","\t","\t/**","\t * Remove the specified resource from storage.","\t *","\t * @param  int  $id","\t * @return Response","\t */","\tpublic function delete(Request $data)","\t{","\t\t$val = new stdClass();","\t\t$id = $data->id;","\t\t$result=Sendfile::where('id', $id)->update(array('state' \t=> '-2'));","\t\t$val->id=$id;","\t\tif($result){","\t\t\t$val->error=false;","\t\t\t$val->link='listfile';","\t\t}else{","\t\t\t$val->error=true;","\t\t}","\t\techo json_encode($val);","\t}","","}",""],"id":1}],[{"start":{"row":11,"column":39},"end":{"row":13,"column":16},"action":"remove","lines":["","use App\\Divisions;","use App\\Subject;"],"id":3}],[{"start":{"row":22,"column":33},"end":{"row":22,"column":41},"action":"remove","lines":["sendfile"],"id":4},{"start":{"row":22,"column":33},"end":{"row":22,"column":34},"action":"insert","lines":["i"]}],[{"start":{"row":22,"column":34},"end":{"row":22,"column":35},"action":"insert","lines":["m"],"id":5}],[{"start":{"row":22,"column":35},"end":{"row":22,"column":36},"action":"insert","lines":["p"],"id":6}],[{"start":{"row":22,"column":36},"end":{"row":22,"column":37},"action":"insert","lines":["o"],"id":7}],[{"start":{"row":22,"column":37},"end":{"row":22,"column":38},"action":"insert","lines":["r"],"id":8}],[{"start":{"row":22,"column":38},"end":{"row":22,"column":39},"action":"insert","lines":["t"],"id":9}],[{"start":{"row":20,"column":27},"end":{"row":21,"column":45},"action":"remove","lines":["","    {\t$program= DB::table('programs')->get();"],"id":10}],[{"start":{"row":21,"column":41},"end":{"row":21,"column":63},"action":"remove","lines":[" ['program'=>$program]"],"id":11}],[{"start":{"row":21,"column":40},"end":{"row":21,"column":41},"action":"remove","lines":[","],"id":12}],[{"start":{"row":65,"column":45},"end":{"row":66,"column":0},"action":"insert","lines":["",""],"id":13},{"start":{"row":66,"column":0},"end":{"row":66,"column":6},"action":"insert","lines":["\t\t    "]}],[{"start":{"row":66,"column":6},"end":{"row":66,"column":7},"action":"insert","lines":["p"],"id":14}],[{"start":{"row":66,"column":7},"end":{"row":66,"column":8},"action":"insert","lines":["r"],"id":15}],[{"start":{"row":66,"column":8},"end":{"row":66,"column":9},"action":"insert","lines":["i"],"id":16}],[{"start":{"row":66,"column":9},"end":{"row":66,"column":10},"action":"insert","lines":["n"],"id":17},{"start":{"row":66,"column":10},"end":{"row":66,"column":11},"action":"insert","lines":["t"]}],[{"start":{"row":66,"column":11},"end":{"row":66,"column":12},"action":"insert","lines":["_"],"id":18}],[{"start":{"row":66,"column":12},"end":{"row":66,"column":13},"action":"insert","lines":["r"],"id":19}],[{"start":{"row":66,"column":13},"end":{"row":66,"column":15},"action":"insert","lines":["()"],"id":20}],[{"start":{"row":66,"column":14},"end":{"row":66,"column":15},"action":"insert","lines":["r"],"id":21}],[{"start":{"row":66,"column":15},"end":{"row":66,"column":16},"action":"insert","lines":["o"],"id":22}],[{"start":{"row":66,"column":16},"end":{"row":66,"column":17},"action":"insert","lines":["w"],"id":23}],[{"start":{"row":66,"column":16},"end":{"row":66,"column":17},"action":"remove","lines":["w"],"id":24}],[{"start":{"row":66,"column":15},"end":{"row":66,"column":16},"action":"remove","lines":["o"],"id":25}],[{"start":{"row":66,"column":14},"end":{"row":66,"column":15},"action":"remove","lines":["r"],"id":26}],[{"start":{"row":66,"column":14},"end":{"row":66,"column":15},"action":"insert","lines":["$"],"id":27}],[{"start":{"row":66,"column":15},"end":{"row":66,"column":16},"action":"insert","lines":["r"],"id":28}],[{"start":{"row":66,"column":16},"end":{"row":66,"column":17},"action":"insert","lines":["o"],"id":29}],[{"start":{"row":66,"column":17},"end":{"row":66,"column":18},"action":"insert","lines":["w"],"id":30}],[{"start":{"row":66,"column":19},"end":{"row":66,"column":20},"action":"insert","lines":[" "],"id":31}],[{"start":{"row":66,"column":19},"end":{"row":66,"column":20},"action":"remove","lines":[" "],"id":32}],[{"start":{"row":66,"column":19},"end":{"row":66,"column":20},"action":"insert","lines":[";"],"id":33}],[{"start":{"row":66,"column":20},"end":{"row":66,"column":21},"action":"insert","lines":[" "],"id":34}],[{"start":{"row":66,"column":21},"end":{"row":66,"column":22},"action":"insert","lines":["e"],"id":35}],[{"start":{"row":66,"column":22},"end":{"row":66,"column":23},"action":"insert","lines":["x"],"id":36}],[{"start":{"row":66,"column":23},"end":{"row":66,"column":24},"action":"insert","lines":["i"],"id":37}],[{"start":{"row":66,"column":24},"end":{"row":66,"column":25},"action":"insert","lines":["t"],"id":38}],[{"start":{"row":66,"column":25},"end":{"row":66,"column":26},"action":"insert","lines":[";"],"id":39}],[{"start":{"row":65,"column":45},"end":{"row":66,"column":26},"action":"remove","lines":["","\t\t    print_r($row); exit;"],"id":40}],[{"start":{"row":103,"column":1},"end":{"row":318,"column":4},"action":"remove","lines":["\tfor($row = 7; $row <= $highestRow; ++$row){","\t\t\t$ar=''; ","\t\t\tfor($col = 0; $col <= $highestColumnIndex; ++$col){","\t\t\t\t$ar[]=$sheet->getCellByColumnAndRow($col, $row)->getValue();","\t\t\t}","\t\t\tif($typeid==1)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs = 1;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==2)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=2;","\t\t        \t\t","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==3)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=3;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==4)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=4;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==5)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[15];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=5;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==6)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[11];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=6;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==7)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[12];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=7;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==8)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[10];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=8;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==9)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[10];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=9;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}","\t\t\tif($typeid==10)","\t\t\t{","\t\t\t\tif($ar[0]!=''):","\t\t\t\t\t$department_name=$ar[13];","\t\t\t\t\t$department = DB::table('departments')->where('department_name',trim($department_name))->first();","\t\t\t\t\t","\t\t\t\t\tif($department->id!=''):","\t\t\t\t\t\t$subject =new Subject();","\t\t\t\t\t\tif($subject->subject_name==''):","\t\t        \t\t\t$subject->subject_name = $ar[2];","\t\t        \t\tendif;","\t\t        \t\t$subject->id_programs=10;","\t\t        \t\t$subject->id_department = $department->id;","\t\t        \t\t$subject->number = $ar[3];","\t\t        \t\t$subject->number_practice = ($ar[4]) ? $ar[4] : 0;","\t\t        \t\t$subject->semester = $ar[5];","\t\t        \t\t$subject->note=($ar[16]) ? $ar[16] : '';","\t\t        \t\t$subject->save();","\t\t        \tendif;","\t        \tendif;","\t\t\t}"],"id":41}],[{"start":{"row":101,"column":3},"end":{"row":104,"column":3},"action":"remove","lines":["","\t\t","\t","\t\t}"],"id":42}],[{"start":{"row":20,"column":27},"end":{"row":21,"column":4},"action":"insert","lines":["","    "],"id":43,"ignore":true}],[{"start":{"row":20,"column":27},"end":{"row":20,"column":28},"action":"insert","lines":["{"],"id":44,"ignore":true},{"start":{"row":20,"column":28},"end":{"row":21,"column":4},"action":"remove","lines":["","    "]}]]},"ace":{"folds":[],"scrolltop":1644.545392036438,"scrollleft":0,"selection":{"start":{"row":101,"column":3},"end":{"row":101,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":573,"mode":"ace/mode/php"}},"timestamp":1464627589758,"hash":"2dcf58c0ce071b8d8ef346545981a1e4d3e97812"}